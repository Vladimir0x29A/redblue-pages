(function(t){function e(e){for(var s,i,o=e[0],u=e[1],c=e[2],d=0,m=[];d<o.length;d++)i=o[d],a[i]&&m.push(a[i][0]),a[i]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);l&&l(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={app:0},r=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header"),n("div",{staticClass:"red-blue__wrapper"},[n("transition",{attrs:{name:"anim-overlay"}},[t.winning.color?n("div",{staticClass:"redblue-overlay"}):t._e()]),n("div",{staticClass:"columner"},[n("div",{staticClass:"columner__column columner__column--1 column-game"},[n("LastWins",{staticClass:"column-game__column-last-wins"}),n("div",{staticClass:"column-game__column-wheel"},[n("Wheel")],1)],1),n("div",{staticClass:"columner__column columner__column--1"},[n("AtStake"),n("BetEditor")],1)]),n("div",{staticClass:"columner columner--margin"},[n("div",{staticClass:"columner__column columner__column--1"},[n("Bets",{attrs:{color:"red",total:t.totalRed}})],1),n("div",{staticClass:"columner__column columner__column--1"},[n("Bets",{attrs:{color:"blue",total:t.totalBlue}})],1)])],1)],1)},r=[],i=n("cebc"),o=n("2f62"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wheel"},[n("div",{staticClass:"wheel__cursor-container"},[n("transition",{attrs:{name:"anim-wheel-cursor"}},[t.isRoundEnded&&!t.winning.color?n("svg",{staticClass:"wheel__cursor",attrs:{width:"51",height:"24",viewBox:"0 0 51 24"}},[n("path",{attrs:{d:"M25 24C25 10 14 0 0 0h51C37 0 26 10 26 24h-1z"}})]):t._e()])],1),n("div",{staticClass:"wheel__timer-container"},[n("transition",{attrs:{name:"anim-wheel-timer",mode:"out-in"},on:{"after-enter":t.startRound}},[t.isRoundEnded?t.winning.color?n("div",{key:"winner",staticClass:"wheel__timer"},[t._v("\n        "+t._s(t.winning.color.toUpperCase())+" WON"),n("br"),t._v("\n        "+t._s(t.winning.amount)+" TRX\n      ")]):t._e():n("div",{key:"timer",staticClass:"wheel__timer"},[t._v("\n        "+t._s(t.animTimer.toFixed(1))+"s\n      ")])])],1),n("div",{staticClass:"wheel__wheel-container"},[n("svg",{style:t.rotateStyleObj,attrs:{width:"100%",height:"100%",viewBox:"0 0 330 330"},on:{transitionend:t.determineWinner}},[n("mask",{attrs:{id:"redblue-wheel-mask"}},[n("circle",{staticClass:"wheel__mask",attrs:{r:"155",cx:"50%",cy:"50%",fill:"none",stroke:"white"}})]),n("g",{attrs:{mask:"url(#redblue-wheel-mask)"}},[n("circle",{staticClass:"wheel__blue",attrs:{r:"50%",cx:"50%",cy:"50%"}}),n("path",{staticClass:"wheel__red",attrs:{d:t.arc}})])])]),n("transition",{attrs:{name:"anim-wheel-glow"}},[t.winning.color?n("div",{staticClass:"wheel__glow",class:{"wheel__glow--blue":"blue"===t.winning.color}},[n("div",{staticClass:"wheel__glow-inner"})]):t._e()])],1)},c=[],l=n("2e20"),d={name:"Wheel",data:function(){return{r:165,animAngleArc:0,timer:5,animTimer:0,rotateStyleObj:{transition:"none",transform:"none"},angleRotation:0,timerId:0,red:!1,blue:!1}},computed:Object(i["a"])({},Object(o["e"])(["isRoundEnded","winning"]),Object(o["c"])(["totalRedPercentage","isRoundCanBeStarted"]),{angleArc:function(){return 359.99999*this.totalRedPercentage/100},arc:function(){var t=this.r,e=this.x,n=this.y,s=this.animAngleArc<=180?0:1;return"M".concat(t,",0 A").concat(t,",").concat(t," 0 ").concat(s,",0 ").concat(e,",").concat(n," L").concat(t,",").concat(t," Z")},x:function(){return this.calcCoord("sin")},y:function(){return this.calcCoord("cos")}}),methods:Object(i["a"])({},Object(o["d"])(["updateRoundEndedStatus"]),Object(o["b"])(["setWinningColor","clearRound"]),{calcCoord:function(t){return this.r-Math[t](this.animAngleArc*Math.PI/180)*this.r},rotate:function(){var t=this,e=5,n=7,s=Math.floor(e+Math.random()*(n-e)),a=0,r=360;this.angleRotation=Math.floor(a+Math.random()*(r-a));var i=this.angleRotation+360*s;this.rotateStyleObj.transition="transform 5s",this.$nextTick(function(){t.rotateStyleObj.transform="rotate(".concat(i,"deg)")})},launchTimer:function(){this.isRoundEnded||l["a"].fromTo(this.$data,this.timer,{animTimer:this.timer},{animTimer:0,ease:Power0.easeNone,onComplete:this.timerCallback})},timerCallback:function(){clearTimeout(this.timerId),this.updateRoundEndedStatus(!0),this.rotate()},determineWinner:function(){var t=this,e=this.angleRotation<=this.angleArc?"red":"blue";this.setWinningColor(e),setTimeout(function(){t.clearRound(),t.startRound()},3e3)},startRound:function(){this.rotateStyleObj.transition="none",this.rotateStyleObj.transform="rotate(".concat(this.angleRotation,"deg)"),l["a"].fromTo(this.$data,0,{animTimer:this.timer},{animTimer:this.timer,ease:Power0.easeNone})}}),watch:{angleArc:function(t){l["a"].to(this.$data,.5,{animAngleArc:t,ease:Power2.easeInOut})},isRoundCanBeStarted:function(t){t&&this.launchTimer()}},mounted:function(){this.startRound()}},m=d,_=n("2877"),h=Object(_["a"])(m,u,c,!1,null,null,null),f=h.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block-blue at-stake"},[n("div",{staticClass:"at-stake__column at-stake__side"},[n("div",{staticClass:"at-stake__header at-stake__header--left"},[t._v(t._s(t.bets["red"].length)+"/"+t._s(t.users.length))]),n("div",{staticClass:"at-stake__content at-stake__content--left at-stake__content--red"},[t._v(t._s(Math.floor(t.redAnim))+"%")])]),n("div",{staticClass:"at-stake__column"},[n("div",{staticClass:"at-stake__header"},[t._v("At Stake")]),n("div",{staticClass:"at-stake__content"},[t._v(t._s(Math.floor(t.atStakeAnim))+" TRX")])]),n("div",{staticClass:"at-stake__column at-stake__side"},[n("div",{staticClass:"at-stake__header at-stake__header--right"},[t._v(t._s(t.bets["blue"].length)+"/"+t._s(t.users.length))]),n("div",{staticClass:"at-stake__content at-stake__content--right at-stake__content--blue"},[t._v(t._s(Math.floor(t.blueAnim))+"%")])])])},v=[],p={name:"AtStake",data:function(){return{redAnim:0,blueAnim:0,atStakeAnim:0}},computed:Object(i["a"])({},Object(o["e"])(["bets","users"]),Object(o["c"])(["total","totalRedPercentage","totalBluePercentage"])),watch:{totalRedPercentage:function(t){l["a"].to(this.$data,.4,{redAnim:t,ease:Power2.easeInOut})},totalBluePercentage:function(t){l["a"].to(this.$data,.4,{blueAnim:t,ease:Power2.easeInOut})},total:function(t){l["a"].to(this.$data,.4,{atStakeAnim:t,ease:Power2.easeInOut})}}},g=p,w=Object(_["a"])(g,b,v,!1,null,null,null),C=w.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block-blue bet-editor"},[n("div",{staticClass:"columner"},[n("button",{staticClass:"columner__column columner__column--2 bet-editor__column-item button-rb button-rb--red",attrs:{disabled:t.isBetMade||t.isRoundEnded},on:{click:function(e){return t.makeBet("red")}}},[t._m(0)]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"columner__column columner__column--2 bet-editor__column-item bet-editor__input",attrs:{type:"text"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),n("button",{staticClass:"columner__column columner__column--2 bet-editor__column-item button-rb button-rb--blue",attrs:{disabled:t.isBetMade||t.isRoundEnded},on:{click:function(e){return t.makeBet("blue")}}},[t._m(1)])]),n("div",{staticClass:"bet-editor__text"},[t._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.")])])},j=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"button-rb__label"},[t._v("Put on"),n("br",{staticClass:"button-rb__br"}),t._v(" red")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"button-rb__label"},[t._v("Put on"),n("br",{staticClass:"button-rb__br"}),t._v(" blue")])}],k={name:"BetEditor",data:function(){return{amount:100}},computed:Object(i["a"])({},Object(o["e"])(["isRoundEnded"]),Object(o["c"])(["currentUser","isBetMade"])),methods:Object(i["a"])({},Object(o["d"])(["updateBets","decreaseCurrentUserAmount"]),{makeBet:function(t){this.decreaseCurrentUserAmount(+this.amount),this.updateBets({color:t,user:this.currentUser,amount:+this.amount})}})},x=k,R=Object(_["a"])(x,O,j,!1,null,null,null),y=R.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bets",class:{"bets--fade":t.isRoundEnded}},[n("div",{staticClass:"bets__header"},[n("div",{staticClass:"bets__header-users",class:t.css.user},[t._v(t._s(t.localBets.length)+"/"+t._s(t.users.length))]),n("div",{staticClass:"bets__header-bets"},[n("span",{staticClass:"bets__header-label"},[t._v("Bets:")]),n("span",{staticClass:"bets__header-amount"},[t._v(t._s(t.total)+" TRX")])])]),n("transition",{attrs:{name:"anim-bet-list"},on:{"after-leave":t.endAnimHandler}},[t.showList?n("transition-group",{staticClass:"bets__list",class:t.css.list,attrs:{tag:"div",name:"anim-bet-item"}},[t._l(t.localBets,function(e){return n("div",{key:e.key,staticClass:"bets__list-item",class:t.isCurrentUser(e.user.index)},[n("div",{staticClass:"bets__list-user"},[n("img",{staticClass:"bets__avatar avatar avatar-5 avatar-5--identicon",attrs:{src:e.user.avatar}}),t._v("\n          "+t._s(e.user.userName)+"\n        ")]),n("div",{staticClass:"bets__item-amount"},[t._v(t._s(e.amount)+" TRX")])])}),n("div",{key:"bottom",staticClass:"bets__list-bottom",class:t.css.bottom})],2):t._e()],1)],1)},M=[],U=(n("c5f6"),{name:"Bets",props:{color:String,total:Number},computed:Object(i["a"])({},Object(o["e"])(["showList","isRoundEnded","users","currentUserIndex","bets"]),{localBets:function(){return this.bets[this.color]},css:function(){return{list:"bets__list--"+this.color,item:"bets__list-item--"+this.color,bottom:"bets__list-bottom--"+this.color,user:"bets__header-users--"+this.color}}}),methods:Object(i["a"])({},Object(o["d"])(["updateHideList"]),{isCurrentUser:function(t){if(this.currentUserIndex===t)return this.css.item},endAnimHandler:function(){this.updateHideList(!0)}})}),B=U,S=Object(_["a"])(B,A,M,!1,null,null,null),E=S.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"last-wins"},[n("div",{staticClass:"last-wins__header"},[t._v("Last wins")]),n("transition-group",{staticClass:"last-wins__list",attrs:{tag:"div",name:"anim-last-wins"}},t._l(t.lastWins,function(e){return n("div",{key:e.index,staticClass:"last-wins__list-item",class:t.css(e.color)},[t._v("\n\n      "+t._s(e.amount)+" TRX\n    ")])}),0)],1)},W=[],P={name:"LastWins",computed:Object(i["a"])({},Object(o["e"])(["lastWins"])),methods:{css:function(t){return"last-wins__list-item--"+t}}},T=P,L=Object(_["a"])(T,I,W,!1,null,null,null),$=L.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"header"},[n("div",{staticClass:"header__amount"},[t._v(t._s(Math.floor(t.amountAnim))+" TRX")]),t.currentUser?n("div",{staticClass:"header__user"},[n("img",{staticClass:"header__avatar avatar avatar-6 avatar-6--identicon",attrs:{src:t.currentUser.avatar}}),t._v("\n    "+t._s(t.currentUser.userName)+"\n  ")]):t._e()])},H=[],X={name:"Header",data:function(){return{amountAnim:0}},computed:Object(i["a"])({},Object(o["e"])(["currentUserAmount"]),Object(o["c"])(["currentUser"])),watch:{currentUserAmount:function(t){l["a"].to(this.$data,.4,{amountAnim:t,ease:Power2.easeInOut})}}},z=X,D=Object(_["a"])(z,N,H,!1,null,null,null),G=D.exports,J=(n("55dd"),{data:function(){return{userIndexesShuffled:[],timerId:0}},computed:Object(i["a"])({},Object(o["e"])(["users","isRoundEnded","currentUserIndex"]),{userIndexes:function(){var t=this;return this.users.map(function(t,e){return e}).filter(function(e){return e!==t.currentUserIndex})}}),methods:Object(i["a"])({},Object(o["d"])(["updateBets"]),{shuffle:function(t){return[].concat(t).sort(function(){return Math.random()-.5})},initUserIndexes:function(){this.userIndexesShuffled=this.shuffle(this.userIndexes)},pushUser:function(){var t=this;if(this.userIndexesShuffled.length){var e=100,n=2e3,s=Math.floor(e+Math.random()*(n-e));this.timerId=setTimeout(function(){var e=t.users[t.userIndexesShuffled.pop()],n=Math.random();t.updateBets({color:Math.floor(2*n)?"red":"blue",user:e,amount:Math.floor(300*n)}),t.pushUser()},s)}}}),watch:{isRoundEnded:function(t){t?(clearTimeout(this.timerId),this.userIndexesShuffled=[]):(this.initUserIndexes(),this.pushUser())},users:function(t){t.length&&(this.initUserIndexes(),this.pushUser())}}}),q={computed:Object(i["a"])({},Object(o["e"])(["showList","winning"])),methods:Object(i["a"])({},Object(o["d"])(["updateLastWins","clearWinning"])),watch:{showList:function(t){t||(this.updateLastWins(Object.assign({},this.winning)),this.clearWinning())}}},F={name:"app",components:{Header:G,Wheel:f,AtStake:C,BetEditor:y,Bets:E,LastWins:$},mixins:[J,q],computed:Object(i["a"])({},Object(o["e"])(["winning"]),Object(o["c"])(["totalBlue","totalRed"])),methods:Object(i["a"])({},Object(o["b"])(["init"])),mounted:function(){this.init()}},K=F,Z=(n("5c0b"),Object(_["a"])(K,a,r,!1,null,null,null)),Q=Z.exports,V=(n("7514"),n("75fc")),Y=(n("ac6a"),n("456d"),n("a481"),n("6b54"),n("36f3")),tt=n.n(Y);new s["a"];function et(){for(var t="123456789abcdefghijkmnpqrstvuwxyzABCDEFGHIJKLMNPQRSTUVWXYZ",e="T",n=1;n<34;n++)e+=t[Math.floor(Math.random()*t.length)];for(var s={size:55,format:"svg",margin:0,background:[0,0,0,0],brightness:.3,saturation:1},a="",r=1;r<e.length;r++)a+=e.charCodeAt(r).toString(16);e=a;var i="data:image/svg+xml;utf8,",o=new tt.a(e,s).toString(!0);return o=o.replace(/ stroke:.+?\d;/,""),i+o}s["a"].use(o["a"]);var nt=10,st=new o["a"].Store({state:{showList:!0,isRoundEnded:!1,percentage:0,lastWins:[],userNames:["Dominator666","RabbitEater3000","RealGuy228","DedMoroz","LuckyMan777","BadGuy13","CreepyKitty","DenzelWashington","TomatoAss","AngryBunny"],users:[],currentUserIndex:0,currentUserAmount:0,bets:{red:[],blue:[]},winning:{color:"",amount:0}},getters:{currentUser:function(t){return t.users[t.currentUserIndex]},totalRed:function(t){return t.bets["red"].reduce(function(t,e){return t+e.amount},0)},totalBlue:function(t){return t.bets["blue"].reduce(function(t,e){return t+e.amount},0)},totalRedPercentage:function(t,e){return Math.floor(e.totalRed/e.total*100)||0},totalBluePercentage:function(t,e){return e.totalRed||e.totalBlue?100-e.totalRedPercentage:0},total:function(t,e){return e.totalRed+e.totalBlue},isBetMade:function(t){return Object.keys(t.bets).some(function(e){return t.bets[e].some(function(e){return e.user.index===t.currentUserIndex})})},isRoundCanBeStarted:function(t){return Object.keys(t.bets).every(function(e){return t.bets[e].length})}},mutations:{updateHideList:function(t,e){t.showList=e},initUsers:function(t){t.users=t.userNames.map(function(t,e){return{userName:t,avatar:et(),index:e}}),t.currentUserIndex=Math.floor(Math.random()*t.userNames.length),t.currentUserAmount=Math.floor(2e3*Math.random())},updateCurrentUserAmount:function(t,e){t.currentUserAmount=e},decreaseCurrentUserAmount:function(t,e){t.currentUserAmount-=e},increaseCurrentUserAmount:function(t,e){t.currentUserAmount+=e},updateRoundEndedStatus:function(t,e){t.isRoundEnded=e},updateLastWins:function(t,e){e.index=Math.random(),t.lastWins.pop(),t.lastWins.unshift(e)},initLastWins:function(t){t.lastWins=Object(V["a"])(Array(nt)).map(function(){var t=Math.random();return{amount:Math.floor(1e3*t),color:Math.floor(2*t)?"red":"blue",index:t}})},updateBets:function(t,e){var n=e.color,s=e.user,a=e.amount;t.bets[n].push({user:s,amount:a,key:Math.random()})},clearBets:function(t){Object.keys(t.bets).forEach(function(e){return t.bets[e]=[]})},updateWinning:function(t,e){var n=e.color,s=e.amount;t.winning.color=n,t.winning.amount=s},clearWinning:function(t){t.winning.color="",t.winning.amount=0}},actions:{init:function(t){var e=t.commit;e("initUsers"),e("initLastWins")},setWinningColor:function(t,e){var n=t.commit,s=t.getters,a=t.state,r={color:e,amount:s.total};n("updateWinning",r);var i=a.bets[e],o=i.find(function(t){return t.user.index===a.currentUserIndex});if(o){var u=Math.floor(o.amount/i.reduce(function(t,e){return t+e.amount},0)*s.total);n("increaseCurrentUserAmount",u)}},clearRound:function(t){var e=t.commit;e("updateRoundEndedStatus",!1),e("updateHideList",!1),e("clearBets")}}});s["a"].config.productionTip=!1,new s["a"]({store:st,render:function(t){return t(Q)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var s=n("e332"),a=n.n(s);a.a},e332:function(t,e,n){}});
//# sourceMappingURL=app.f1440350.js.map